<%= form_with model:review, url:movie_reviews_path, local:true do |f| %>
  <%= f.hidden_field :movie_id, value: @movie['id'] %>

  <div id="stars"></div>
  
  <script>
    $(document).on('turbolinks:load', function() {
      let elem = document.querySelector('#stars');
      if(elem == null) return;

      elem.innerHTML = ""
      let opt = {
        starOn: "<%= asset_path('star-on.png') %>",
        starOff: "<%= asset_path('star-off.png') %>",
        starHalf: "<%= asset_path('star-half.png') %>",
        scoreName: 'review[star]',
      };
      raty(elem, opt);
    });
  </script>

  <div class="form-group mb-3">
    <%= f.text_field :title, placeholder: "review title...", class: 'form-control' %>
  </div>
  <div class="form-group mb-3">
    <%= f.text_area :comment, placeholder: "review...", class: 'form-control' %>
  </div>
  <%= f.submit "review" %>
<% end %>